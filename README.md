# Анализатор поездок на такси

Приложение для анализа поездок на такси из писем Яндекс.Такси. Программа извлекает информацию о поездках, фильтрует их по заданным адресам и формирует отчет с формулами для расчета стоимости по рабочим неделям.

## Установка

1. Клонируйте репозиторий
2. Установите зависимости:

```
pip install -r requirements.txt
```
3. Создайте файл `.env` на основе `.env.example`:

## Настройка доступа к почте

Для Яндекс.Почты необходимо использовать пароль приложения:
1. Перейдите в настройки безопасности Яндекс
2. Включите двухфакторную аутентификацию
3. В разделе "Пароли приложений" создайте новый пароль
4. Используйте этот пароль в файле `.env`

## Использование

### Проверка подключения к почте
```
python list-test.py
```

### Запуск основного приложения
```
python main.py
```

Для включения подробного логирования:
```
python main.py --logging-level=DEBUG
#может принимать значения DEBUG, INFO, WARNING, ERROR, CRITICAL
```

При запуске программа запросит месяц в формате 'YYYY-MM', например, '2023-05'.

## Структура проекта

- `main.py` - Точка входа в приложение
- `config.py` - Загрузка конфигурации из .env файла
- `mail_client.py` - Работа с почтовым ящиком
- `parser.py` - Парсинг содержимого писем
- `analytics.py` - Анализ и форматирование результатов
- `cache_manager.py` - Кеширование данных
- `list-test.py` - Утилита для проверки подключения к почте

## Формат вывода

Программа выводит:
1. Список найденных поездок с информацией о маршруте, стоимости, дате и времени
2. Рабочие недели месяца в формате "день_начала-день_окончания"
3. Формулы для расчета стоимости по неделям